(()=>{"use strict";let t=document.getElementById("products__search"),e=document.getElementsByClassName("item-title");function n(t){return t.toLowerCase().replace(/\s/g,"").trim()}function o(t,e){return t.parentElement.style.display=e}function a(t){t&&Array.from(e).filter((e=>{n(e.innerHTML).includes(t)?o(e,"flex"):o(e,"none")}))}t.oninput=function(){let t=document.getElementById("products__search").value;console.log(t),t&&a(n(t)),t||location.reload()};const i=a,r=document.getElementById("products__droplist-asc"),c=document.getElementById("products__droplist-desc"),l=document.getElementById("products__droplist");let s=document.getElementById("products-list");function d(t){let e=document.createElement("div");e.className="product",e.id=`product-item-${t.id}`,e.dataset.sort=`${t.price}`,e.dataset.brand=`${t.brand}`,e.dataset.category=`${t.category}`,e.innerHTML=`\n  <div id="element1" class="element"\n  style="background: url(${t.thumbnail}) no-repeat left; background-size: auto; dispaly: block;">\n  <div class="item-title">${t.title}</div>\n  <div class="element-info">\n    <ul class="info-list">\n      <li class="info-list__item"><span>Category: </span> ${t.category}</li>\n      <li class="info-list__item"><span>Brand</span>: ${t.brand}</li>\n      <li class="info-list__item"><span>Price</span>: ${t.price}ÔºÑ</li>\n      <li class="info-list__item"><span>Discount</span>: ${t.discountPercentage}%</li>\n      <li class="info-list__item"><span>Rating</span>: ${t.rating}‚≠êÔ∏è</li>\n      <li class="info-list__item"><span>Stock</span>: ${t.stock}üõç</li>\n    </ul>\n  </div>\n  <div class="item-buttons">\n    <button class="item-buttons__add" id=product-add-${t.id}>Add to cart</button>\n    <button class="item-buttons__details" id=product-details-${t.id}>Details</button>\n  </div>\n</div>`,s.appendChild(e)}function u(t,e,n){t.classList.add(e),t.textContent=n}const m=function(t,e,n,o){const a=document.querySelector(t),i=document.querySelector(n),r=JSON.parse(localStorage.getItem("RS-online-cart"));a.textContent=e+r.reduce(((t,e)=>t+e.count),0),i.textContent=o+r.reduce(((t,e)=>t+e.count*e.price),0)};function f(t,e){return t.reduce(((t,n)=>t.includes(n.getAttribute(e).toLowerCase())?t:[...t,n.getAttribute(e).toLowerCase()]),[])}function p(t){const e=Array.from(document.querySelectorAll(".product"));let n=document.getElementById("filter-brand"),o=document.getElementById("filter-category"),a=document.createElement("div");a.className="filter__list-item",a.innerHTML=`\n  <div class="filter-list-item" data-filter="${t}">\n  <div>\n    <label>\n      <input class="filter-list-item__checkbox" type="checkbox">\n      ${t}\n    </label>\n  </div>\n  <span>(0/0)</span>\n</div>`,f(e,"data-brand").includes(t)&&n.appendChild(a),f(e,"data-category").includes(t)&&o.appendChild(a)}function g(t){for(let e in t)p(t[e])}let y=[];function _(t,e){return t.style.display=e}const v=function(){const t=document.querySelectorAll(".filter-list-item");Array.from(t).map((t=>{t.addEventListener("change",(e=>{e&&function(t,e){y.includes(e.getAttribute("data-filter"))?y.splice(y.indexOf(e.getAttribute("data-filter"))):t&&y.push(e.getAttribute("data-filter")),function(){const t=document.getElementsByClassName("product");y.length?Array.from(t).map((t=>{y.includes(t.getAttribute("data-category").toLowerCase())?_(t,"flex"):_(t,"none")})):Array.from(t).map((t=>{_(t,"flex")}))}(),console.log(y)}(e,t)}))}))};let b,S=document.getElementById("products-list");localStorage.getItem("RS-online-cart")||localStorage.setItem("RS-online-cart",JSON.stringify([])),async function(){let t=await fetch("https://dummyjson.com/products"),e=(await t.json()).products;for(let t in e)await d(e[t]);return e}().then((t=>{b=JSON.parse(JSON.stringify(t)),JSON.parse(localStorage.getItem("RS-online-cart")).forEach((t=>{if(b.find((e=>e.id===t.id))){const e=b.find((e=>e.id===t.id));u(document.querySelector(`#product-add-${e.id}`),"button-add__active","Remove from cart")}}));const e=Array.from(document.querySelectorAll(".product"));m(".header__cart span","",".header__total","Cart total:ÔºÑ"),i(),function(t,e){t.addEventListener("click",(t=>{const n=+t.target.id.split("-")[2];let o=JSON.parse(localStorage.getItem("RS-online-cart"));if(t.target.classList.contains("item-buttons__details")&&(window.location.href=function(t){const e=new URLSearchParams({id:t}),n=window.location.pathname.replace("main","about");return window.location.origin+n+"?"+e.toString()}(n)),t.target.classList.contains("button-add__active"))o=o.filter((t=>t.id!==n)),(a=t.target).classList.remove("button-add__active"),a.textContent="Add to cart";else if(t.target.classList.contains("item-buttons__add")){const a=e.find((t=>t.id===n)),i={id:a.id,price:a.price,count:1};o.push(i),u(t.target,"button-add__active","Remove from cart")}var a;localStorage.setItem("RS-online-cart",JSON.stringify(o)),m(".header__cart span","",".header__total","Cart total:ÔºÑ")}))}(S,b),function(){function t(t,e){return[parseInt(t.value,10),parseInt(e.value,10)]}function e(t,e,n,o,a){const i=e.max-e.min,r=t.value-e.min,c=e.value-e.min;a.style.background=`linear-gradient(\n    to right,\n    ${n} 0%,\n    ${n} ${r/i*100}%,\n    ${o} ${r/i*100}%,\n    ${o} ${c/i*100}%, \n    ${n} ${c/i*100}%, \n    ${n} 100%)`}function n(t){const e=document.querySelector("#toSlider");Number(t.value)<=0?e.style.zIndex=2:e.style.zIndex=0}const o=document.querySelector("#fromSlider"),a=document.querySelector("#toSlider"),i=document.querySelector("#fromInput"),r=document.querySelector("#toInput");e(o,a,"#C6C6C6","#25daa5",a),n(a),o.oninput=()=>function(n,o,a){const[i,r]=t(n,o);e(n,o,"#C6C6C6","#25daa5",o),i>r?(n.value=r,a.value=r):a.value=i}(o,a,i),a.oninput=()=>function(o,a,i){const[r,c]=t(o,a);e(o,a,"#C6C6C6","#25daa5",a),n(a),r<=c?(a.value=c,i.value=c):(i.value=r,a.value=r)}(o,a,r),i.oninput=()=>function(n,o,a,i){const[r,c]=t(o,a);e(o,a,"#C6C6C6","#25daa5",i),r>c?(n.value=c,o.value=c):n.value=r}(o,i,r,a),r.oninput=()=>function(o,a,i,r){const[c,l]=t(a,i);e(a,i,"#C6C6C6","#25daa5",r),n(i),c<=l?(o.value=l,i.value=l):i.value=c}(a,i,r,a)}(),function(){const t=document.getElementById("products-list");l.addEventListener("change",(function(){let e=this.options[this.selectedIndex].text;e===r.text&&function(t){Array.from(t.children).sort(((e,n)=>+e.getAttribute("data-sort")>n.getAttribute("data-sort")?t.insertBefore(e,n):-1))}(t),e===c.text&&function(t){Array.from(t.children).sort(((e,n)=>+e.getAttribute("data-sort")<n.getAttribute("data-sort")?t.insertBefore(e,n):-1))}(t)}))}(),g(function(t){return f(t,"data-brand")}(e)),g(function(t){return f(t,"data-category")}(e)),v(),document.getElementById("filters-buttons__reset").addEventListener("click",(t=>{t&&location.reload()}))}))})();